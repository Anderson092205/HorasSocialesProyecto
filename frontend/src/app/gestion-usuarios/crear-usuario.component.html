<div class="container mt-5">
  <div class="card shadow">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h3 class="mb-0">Registrar Nuevo Usuario</h3>
      <span class="badge bg-info text-dark">√Årea Inform√°tica</span>
    </div>
    
    <div class="card-body">
      <div *ngIf="mensajeExito" class="alert alert-success border-0 shadow-sm mb-4">
        {{ mensajeExito }}
      </div>
      <div *ngIf="mensajeError" class="alert alert-danger border-0 shadow-sm mb-4">
        {{ mensajeError }}
      </div>

      <form #userForm="ngForm" (ngSubmit)="userForm.form.valid && onSubmit()">
        
        <div class="row">
         <div class="col-md-6 mb-3">
  <label class="form-label">Nombre Completo</label>
  <input type="text" [(ngModel)]="nuevoUsuario.nombre" name="nombre" 
         class="form-control" placeholder="Ej: Juan P√©rez" required #nombre="ngModel"
         [class.is-invalid]="nombre.invalid && nombre.touched"> <div *ngIf="nombre.invalid && nombre.touched" class="text-danger small mt-1">
    * Campo obligatorio
  </div>
</div>

<div class="col-md-6 mb-3">
  <label class="form-label">Correo Electr√≥nico</label>
  <input type="email" [(ngModel)]="nuevoUsuario.correo" name="correo" 
         class="form-control" placeholder="usuario@gmail.com" required email #correo="ngModel"
         [class.is-invalid]="correo.invalid && correo.touched"> <div *ngIf="correo.invalid && correo.touched" class="text-danger small mt-1">
    * Ingrese un correo v√°lido
  </div>
</div>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label">Tel√©fono</label>
            <input type="text" [(ngModel)]="nuevoUsuario.telefono" name="telefono" 
                   class="form-control" placeholder="7777-7777" maxlength="9" minlength="9" required
                   (input)="aplicarMascara($event)" #tel="ngModel">
            <div *ngIf="tel.invalid && tel.touched" class="text-danger small mt-1">
              * Formato requerido: 0000-0000
            </div>
          </div>
          
          <div class="col-md-6 mb-3">
            <label class="form-label">Asignar Rol</label>
            <select [(ngModel)]="nuevoUsuario.idRol" name="idRol" class="form-select" required #rol="ngModel">
              <option [value]="1">ADMINISTRADOR</option>
              <option [value]="2">OPERADOR</option>
              <option [value]="3">CONSULTA</option>
              <option [value]="4">INFORMATICA</option>
            </select>
            <div *ngIf="rol.invalid && rol.touched" class="text-danger small mt-1">
              * Debe asignar un rol
            </div>
          </div>
        </div>

        <div class="mb-4">
          <label class="form-label">Contrase√±a Temporal</label>
          <div class="input-group">
            <input type="text" [(ngModel)]="nuevoUsuario.contrasena" name="contrasena" 
                   class="form-control" placeholder="Genere una clave" required #pass="ngModel">
            <button class="btn btn-secondary" type="button" (click)="generarPassword()">Generar üé≤</button>
            <button class="btn btn-outline-primary" type="button" (click)="copiarPassword()" [disabled]="!nuevoUsuario.contrasena">Copiar üìã</button>
          </div>
          <div *ngIf="pass.invalid && pass.touched" class="text-danger small mt-1">
            * Debe generar o escribir una contrase√±a
          </div>
        </div>

        <div class="d-flex justify-content-end gap-2 border-top pt-3">
          <button type="button" class="btn btn-light" (click)="cancelar()">Cancelar</button>
          <button type="submit" class="btn btn-success px-4" [disabled]="userForm.invalid">Guardar Usuario</button>
        </div>

      </form>
    </div>
  </div>
</div>